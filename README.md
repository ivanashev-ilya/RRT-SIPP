# Интеграция безопасно-интервального планирования и быстро-растущих деревьев для задачи поиска пути

# Описание проекта
В данном проекте представлены модификации алгоритмов RRT и RRT*, использующие безопасно-интервальный поиск (метод SIPP),
для решения задачи планирования траектории в среде с динамическими препятствиями. Каждому из реализованных алгоритмов
соотвествует отдельный класс, где класс для RRT-SIPP наследуется от класса RRT, а RRT*-SIPP от RRT-SIPP. Основное
отличие представленных версий алгоритмов от классических заключается генерации нескольких версий каждой точки,
соответствующих ее безопасным интервалам, а также добавлению возможности ожидания в точке, чтобы избежать столкновения
с динамическими препятствиями (см. более подробное описание в отчете). Для проверки наличия столкновений агента
с динамическими препятствиями пространство поиска представляется в виде сетки и конфликт возникает тогда когда
какая-то из ячеек сетки одновременно накрыта как агентом, так и препятствием.

## Компиляция и запуск
Файлы проекта могут быть скомпилированы в Qt Creator с конфигурациями, заданными в файле PathPlanning.pro. При запуске название
входного файла передается в качестве первого аргумента командной строки.

## Формат входных данных
Входные данные поступают в виде файла в формате XML, разделенного на разделы map, algorithm и dynamicobstacles.

### Раздел map - задание карты. Содержит следующие тэги:
- grid - сама карта, 0 означает свободную клетку, а 1 - препятствие. В аттрибутах тега указываются значения height и width - размеры карты.
Ряды обособляются тэгом row, количество рядов должно быть равно height, а количество символов в каждом ряду должно быть равно width.
- startx, starty - координаты стартовой позиции (клетки нумеруются с 0, клетка (0, 0) это верхний левый угол карты)
- finishx, finishy - координаты конечной позиции

### Раздел algorithm - выбор метода планирования траектории и его параметров. Содержит следующие тэги:
- searchtype - название метода, возможны варианты rrt, rrt_sipp, rrt_star_sipp
- timelimit - ограничение на время работы в секундах
- max_edge - максимальная длина ребра, добавляемого в дерево (steering factor)
- seed - seed для генератора случайных чисел

### Раздел dynamicobstacles - описание динамических препятствий
Раздел содержит ряд тегов obstacle, каждый из которых соотвествует одному препятствию.
В свою очередь, каждый такой тег содержит ряд тегов section, каждый из которых описывает следующее
звено ломаной траектории препятствия (все препятствия двигаются со скоростью 1, то есть время прохождения
ребра равно 1). Тег section содержит следующие аттрибуты:
- start.x, start.y - координаты начала звена
- goal.x, goal.y - координаты конца звена

## Формат выходных данных
Выходной файл содержит те же три раздела, содержание которых совпадает со входным файлом, а также раздел log, в котором содержится сам отчет. Он содержит
следующие тэги:

- mapfilename - название входного файла
- summary - общая информация о решении:
    1. length - время на прохождение найденной траектории с учетом времени ожидания
    2. time - время работы алгоритма
- lplevel - последовательность точек в маршруте. Для каждой точки задаются ее координаты x и y,
момент времени, когда агент приходит в точку, а также ее номер в пути

Также в этом же разделе указывается ряд тегов agent, которые нужны для того, чтобы решение можно было построить
в визуализаторе, ранее написанном для других проектов. Первый тег соответсвует найденной алгоритмом траектории,
а последующие траекториям динамических препятствий. Тег содержит тег path, внутри которого указывается ряд секций,
для каждой из которых задаются начальные и конечные координаты, а также длительность ее прохождения.

## Примеры
Пример входного и выходного файлов можно найти в разделе Examples
